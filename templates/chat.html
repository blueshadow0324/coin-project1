{% extends "base.html" %}

{% block content %}
<h1>Chat</h1>

<div id="chat-box" style="border:1px solid #ccc; padding:10px; max-height:400px; overflow-y: scroll; background: #fafafa;">
    {% for msg in messages %}
    <p><strong>{{ msg.user.username }}:</strong> {{ msg.content|e }} <small style="color:gray;">{{ msg.timestamp.strftime('%H:%M:%S') }}</small></p>
    {% endfor %}
</div>

<form method="post" action="{{ url_for('chat') }}">
    <input type="text" name="message" placeholder="Skriv ett meddelande..." autofocus required style="width: 80%;">
    <button type="submit">Skicka</button>
</form>

<script>
// Optional: Auto-scroll chat box to bottom on page load
var chatBox = document.getElementById('chat-box');
chatBox.scrollTop = chatBox.scrollHeight;
</script>

{% endblock %}