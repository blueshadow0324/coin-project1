{% extends "base.html" %}
{% block content %}
<h2>Marketplace</h2>
<a href="{{ url_for('add_item') }}" class="btn btn-primary mb-3">+ Lägg till objekt</a>

{% for item in items %}
<div class="card mb-3">
    <div class="card-body">
        {% if item.image_filename %}
            <img src="{{ url_for('static', filename='uploads/' ~ item.image_filename) }}" class="img-thumbnail" style="max-height:150px;">
        {% endif %}
        <h5 class="card-title">{{ item.title }}</h5>
        <p class="card-text">{{ item.description }}</p>
        <p><strong>Pris:</strong> {{ item.price }} coins</p>
        <p><strong>Säljare:</strong> {{ item.seller.username }}</p>
        {% if item.seller_id != user.id %}
        <form method="post" action="{{ url_for('buy_item', item_id=item.id) }}">
            <button class="btn btn-success" type="submit">Köp</button>
        </form>
        {% else %}
        <small>Du är säljaren</small>
        {% endif %}
    </div>
</div>
{% else %}
<p>Inga objekt tillgängliga just nu.</p>
{% endfor %}
{% endblock %}
➕ templates/add_item.html
{% extends "base.html" %}
{% block content %}
<h2>Lägg till objekt i marknaden</h2>
<form method="post" enctype="multipart/form-data">
    <div class="mb-3">
        <label>Titel:</label>
        <input type="text" name="title" class="form-control" required>
    </div>
    <div class="mb-3">
        <label>Beskrivning:</label>
        <textarea name="description" class="form-control"></textarea>
    </div>
    <div class="mb-3">
        <label>Pris (coins):</label>
        <input type="number" name="price" class="form-control" required min="1">
    </div>
    <div class="mb-3">
        <label>Bild (valfritt):</label>
        <input type="file" name="image" accept="image/*" class="form-control">
    </div>
    <button type="submit" class="btn btn-primary">Lägg till</button>
</form>
{% endblock %}