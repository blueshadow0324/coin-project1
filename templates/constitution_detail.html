{% extends "base.html" %}
{% block content %}
<h2>{{ const.title }}</h2>
<p>{{ const.content }}</p>

<h4>Voting Status</h4>

{% if const.first_vote_passed %}
  <p>‚úÖ First vote passed.</p>
  <p>Final vote scheduled at: {{ const.final_vote_date.strftime('%Y-%m-%d %H:%M UTC') }}</p>
  {% if const.final_vote_deadline %}
    <p>Final vote ends at: {{ const.final_vote_deadline.strftime('%Y-%m-%d %H:%M UTC') }}</p>
  {% endif %}
{% else %}
  <p>üó≥Ô∏è First vote ongoing.</p>
  {% if const.first_vote_deadline %}
    <p>First vote ends at: {{ const.first_vote_deadline.strftime('%Y-%m-%d %H:%M UTC') }}</p>
  {% endif %}
{% endif %}

<h3>Cast Vote</h3>
<form method="post">
  <input type="hidden" name="phase" value="first">
  <button name="vote" value="yes" class="btn btn-success">Yes (First Vote)</button>
  <button name="vote" value="no" class="btn btn-danger">No (First Vote)</button>
  <button name="vote" value="abstain" class="btn btn-secondary">Abstain</button>
</form>

<form method="post">
  <input type="hidden" name="phase" value="final">
  <button name="vote" value="yes" class="btn btn-success">Yes (Final Vote)</button>
  <button name="vote" value="no" class="btn btn-danger">No (Final Vote)</button>
  <button name="vote" value="abstain" class="btn btn-secondary">Abstain</button>
</form>

<h3>Votes</h3>
<ul>
  {% for v in votes %}
    <li>Party {{ v.party_id }} ({{ v.phase }}): {{ v.vote_choice }}</li>
  {% endfor %}
</ul>
{% endblock %}
